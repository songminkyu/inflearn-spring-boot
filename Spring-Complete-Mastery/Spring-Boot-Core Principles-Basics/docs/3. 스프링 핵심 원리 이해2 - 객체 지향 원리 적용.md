# ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ #3

<br/>

# âœ” ëª©ì°¨
* ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ
* ê´€ì‹¬ì‚¬ ë¶„ë¦¬
* í• ì¸ ì •ì±… ë³€ê²½
* ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©
* IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ
* ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°

<br/>

# ğŸ’¡ ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

ê¸°ì¡´ì˜ í• ì¸ ì •ì±…(1000ì› ê³ ì • í• ì¸)ì„ ìƒˆë¡œìš´ í• ì¸ ì •ì±…(ë¬¼ê±´ ê°€ê²©ì˜ 10%)ìœ¼ë¡œ ë°”ê¾¸ë ¤ê³  í•œë‹¤.

ìš°ë¦¬ëŠ” ë‹¤í˜•ì„±ì„ ì´ìš©í•´ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì˜ ì¤€ìˆ˜í–ˆë‹¤ê³  ìƒê°í•˜ëŠ”ë°, ê³¼ì—° ì˜ ì§€ì¼°ëŠ”ì§€ ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì¶”ê°€í•˜ë©° ì•Œì•„ë³´ì.

<br/>

## **RateDiscountPolicy ì½”ë“œ ì¶”ê°€**

```java
public class RateDiscountPolicy implements DiscountPolicy{

    private final int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP){
            return price * 10 / 100;
        }else {
            return 0;
        }
    }
}
```

<br/>

## **ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì **

ë°©ê¸ˆ ì¶”ê°€í•œ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì½”ë“œë¥¼ ê³ ì³ì•¼í•œë‹¤.

```java
public class OrderServiceImpl implements OrderService {
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

ì—¬ê¸°ì„œ ë¬¸ì œì ì„ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.

* DIP ìœ„ë°˜
  * OrderServiceImpl(í´ë¼ì´ì–¸íŠ¸)ëŠ” DiscountPolicy ì¸í„°í˜ì´ìŠ¤(ì—­í™œ)ì™€ RateDiscountPolicy(êµ¬í˜„ ê°ì²´)ë¥¼ ëª¨ë‘ ì˜ì¡´í•˜ê³  ìˆë‹¤.

* OCP ìœ„ë°˜
  * ì§€ê¸ˆ ì½”ë“œëŠ” ê¸°ëŠ¥ì„ í™•ì •í•˜ë©´, ìœ„ì™€ ê°™ì´ ê¸°ì¡´ì˜ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼í•œë‹¤.

<br/>

# ğŸ’¡ ê´€ì‹¬ì‚¬ ë¶„ë¦¬

ìš°ë¦¬ëŠ” ë‹¤í˜•ì„±ì„ ì´ìš©í•´ ì„¤ê³„ë¥¼ í–ˆëŠ”ë°ë„ DIP, OCPë¥¼ ìœ„ë°˜í•˜ì˜€ë‹¤.

**ì´ ë¬¸ì œë“¤ì€ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤.**

* ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ê³µì—°ìœ¼ë¡œ ìƒê°

* í˜„ì¬ ì½”ë“œëŠ” OrderServiceImpl(í´ë¼ì´ì–¸íŠ¸)ê°€ ì˜ì¡´í•˜ëŠ” RateDiscountPolicy(êµ¬í˜„ ê°ì²´)ë¥¼ ì§ì ‘ ìƒì„±í•˜ê³ , ì‹¤í–‰í•œë‹¤.

* ë¹„ìœ ë¥¼ í•˜ë©´ ê¸°ì¡´ì—ëŠ” ë‚¨ì ì£¼ì¸ê³µ ë°°ìš°ê°€ ê³µì—°ë„ í•˜ê³ , ë™ì‹œì— ì—¬ì ì£¼ì¸ê³µë„ ì§ì ‘ ì´ˆë¹™í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆë‹¤.
  
* ê³µì—°ì„ êµ¬ì„±í•˜ê³ , ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„­ì™¸í•˜ê³ , ì§€ì •í•˜ëŠ” ì±…ì„ì„ ë‹´ë‹¹í•˜ëŠ” ë³„ë„ì˜ ê³µì—° ê¸°íšì AppConfigë¥¼ ë“±ì¥ì‹œí‚¨ë‹¤.

* AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config)í•˜ê¸° ìœ„í•´, êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ”
ì±…ì„ì„ ë¶€ì—¬í•œë‹¤.

<br/>

## **AppConfig**

```java
public class AppConfig {

    private DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }

    private MemberRepository MemberRepository() {
        return new MemoryMemberRepository();
    }

    public MemberServiceImpl memberService(){
        return new MemberServiceImpl(MemberRepository());
    }

    public OrderServiceImpl orderService(){
        return new OrderServiceImpl(MemberRepository(), discountPolicy());
    }
}
```

* AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

  * MemberServiceImpl
  * MemoryMemberRepository
  * OrderServiceImpl
  * FixDiscountPolicy

* AppConfigëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)í•´ì¤€ë‹¤.

* discountPolicy ëŠ” FixDiscountPolicy ì •ì±…ì„ ì‚¬ìš©í•œë‹¤ëŠ” ì—­í™œê³¼ êµ¬í˜„ì„ í•œ ëˆˆì— ë³¼ ìˆ˜ ìˆê²Œ ì •ë¦¬í•´ì•¼í•œë‹¤.

<br/>

## **Service êµ¬ì¡° ë³€ê²½**

**OrderServiceImpl**

```java
public class OrderServiceImpl implements OrderService{

    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;

    // ìƒì„±ì ì£¼ì…
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}
```

<br/>

**MemberServiceImpl**

```java
public class MemberServiceImpl implements MemberService{
    
    private MemberRepository memberRepository;

    // ìƒì„±ì ì£¼ì…
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```

* ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ MemberServiceImplê³¼ OrderServiceImplì€ MemoryMemberRepositoryì™€ FixDiscountPolicyë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.

*  ë‹¨ì§€ MemberRepository, DiscountPolicy (ì¸í„°í˜ì´ìŠ¤) ë“¤ë§Œ ì˜ì¡´í•œë‹¤.

* MemberServiceImplì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(AppConfig)ì—ì„œ ê²°ì •
ëœë‹¤.

* MemberServiceImplì€ ì´ì œë¶€í„° ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€ì— ë§¡ê¸°ê³  ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ëœë‹¤.

<br/>

í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

![a](https://user-images.githubusercontent.com/55661631/106859705-bd666080-6706-11eb-87fb-5f91aab6cbad.PNG)

<br/>

# ğŸ’¡ í• ì¸ ì •ì±… ë³€ê²½

ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ì„œ ì •ì•¡ í• ì¸ ì •ì±…ì„ ì •ë¥ % í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ë³´ì.

ì–´ë–¤ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ë˜ê² ëŠ”ê°€?

AppConfigì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë˜ì—ˆë‹¤.

ë”°ë¼ì„œ êµ¬ì„± ì˜ì—­ì˜ êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

<br/>

![b](https://user-images.githubusercontent.com/55661631/106860890-5a75c900-6708-11eb-8fb4-f00d11478537.PNG)

<br/>

ìœ„ ê·¸ë¦¼ì˜ ê³¼ì •ì„ ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```java
public class AppConfig {

    private DiscountPolicy discountPolicy() {
        //return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }

    private MemberRepository MemberRepository() {
        return new MemoryMemberRepository();
    }

    public MemberServiceImpl memberService(){
        return new MemberServiceImpl(MemberRepository());
    }

    public OrderServiceImpl orderService(){
        return new OrderServiceImpl(MemberRepository(), discountPolicy());
    }
}
```

<br/>

## **ì •ë¦¬**

* ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ AppConfig ê°€ ë‹´ë‹¹í•œë‹¤.

* DIP ì™„ì„± : MemberServiceImpl ì€ MemberRepository ì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤. ì´ì œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼
ëª°ë¼ë„ ëœë‹¤.

* ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ : ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì—ˆë‹¤.

* appConfig ê°ì²´ëŠ” memoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImpl ì„
ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤.

* í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ
DI(Dependency Injection) ìš°ë¦¬ë§ë¡œ **ì˜ì¡´ê´€ê³„ ì£¼ì… ë˜ëŠ” ì˜ì¡´ì„± ì£¼ì…**ì´ë¼ í•œë‹¤.

<br/>

# ğŸ’¡ ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©

## **SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™**
í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.

* í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆë‹¤.
* SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í–ˆë‹¤.
* êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfigê°€ ë‹´ë‹¹í•œë‹¤.
* í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹í•œë‹¤.

<br/>

## **DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™**  
í”„ë¡œê·¸ë˜ë¨¸ëŠ” â€œì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.â€ ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘
í•˜ë‚˜ë‹¤.

* í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ DiscountPolicy ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í–ˆë‹¤.
* í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œìœ¼ë¡œëŠ” ì•„ë¬´ê²ƒë„ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.
* AppConfigê°€ FixDiscountPolicy ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ëŒ€ì‹  ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ
ì— ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í–ˆë‹¤. ì´ë ‡ê²Œí•´ì„œ DIP ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ë¬¸ì œë„ í•´ê²°í–ˆë‹¤.

<br/>

## **OCP**  
ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤

* ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ´ë‹¤.
* AppConfigê°€ ì˜ì¡´ê´€ê³„ë¥¼ FixDiscountPolicy RateDiscountPolicy ë¡œ ë³€ê²½í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”
ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
* ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì—­ì˜ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆë‹¤.

<br/>

# ğŸ’¡ IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ

## **ì œì–´ì˜ ì—­ì „ IoC(Inversion of Control)**

* ê¸°ì¡´ í”„ë¡œê·¸ë¨ì€ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í–ˆë‹¤. í•œë§ˆë””ë¡œ êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢…í–ˆë‹¤. ê°œë°œì ì…ì¥ì—ì„œëŠ” ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì´ë‹¤.
  
* ë°˜ë©´ì— AppConfigê°€ ë“±ì¥í•œ ì´í›„ì— êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•œë‹¤. í”„ë¡œê·¸ë¨ì˜ ì œ
ì–´ íë¦„ì€ ì´ì œ AppConfigê°€ ê°€ì ¸ê°”ë‹¤.

* ì´ë ‡ë“¯ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€(AppConfig)ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì œì–´ì˜ ì—­ì „(IoC)ì´ë¼ í•œë‹¤.

<br/>

## **í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬**

* ì œì–´ì˜ ì—­ì „(Ioc)ê°€ ì¼ì–´ë‚˜ëŠ”ì§€ë¥¼ ë³´ê³  íŒë‹¨í•œë‹¤.

* í”„ë ˆì„ì›Œí¬ê°€ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•˜ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ë§ë‹¤.(JUnit)
  
* ë°˜ë©´ì— ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹í•œë‹¤ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹ˆë¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.

<br/>

## **ì˜ì¡´ê´€ê³„ ì£¼ì… DI(Dependency Injection)**

* ì• í”Œë¦¬ì¼€ì´ì…˜ **ì‹¤í–‰ ì‹œì (ëŸ°íƒ€ì„)**ì— ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ê´€ê³„ê°€ ì—°ê²° ë˜ëŠ” ê²ƒì„ **ì˜ì¡´ê´€ê³„ ì£¼ì…**ì´ë¼ í•œë‹¤.

* ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì°¸ì¡°ê°’ì„ ì „ë‹¬í•´ì„œ ì—°ê²°ëœë‹¤.

* ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

* ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„(í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ)ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

<br/>

## **IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ**

* AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒì„ IoC ì»¨í…Œì´ë„ˆ ë˜ëŠ” DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

* ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ì–´ ìµœê·¼ì—ëŠ” ì£¼ë¡œ DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤. Ioc ì»¨í…Œì´ë„ˆëŠ” ë„ˆë¬´ ë²”ìš©ì ì¸ ë§ì´ë‹¤.

* ë˜ëŠ” ì–´ìƒ˜ë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ ë“±ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.

<br/>

# ğŸ’¡ ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°

ì§€ê¸ˆê¹Œì§€ëŠ” ìˆœìˆ˜í•œ ìë°” ì½”ë“œë§Œìœ¼ë¡œ DIë¥¼ ì ìš©í–ˆë‹¤. ì´ì œ ìŠ¤í”„ë§ì„ ì‚¬ìš©í•´ë³´ì.

<BR/>

## **AppConfig ìŠ¤í”„ë§ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½**

```java
@Configuration
public class AppConfig {

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }

    @Bean
    public MemberRepository MemberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public MemberServiceImpl memberService(){
        return new MemberServiceImpl(MemberRepository());
    }

    @Bean
    public OrderServiceImpl orderService(){
        return new OrderServiceImpl(MemberRepository(), discountPolicy());
    }
}
```

* AppConfigì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ @Configuration ì„ ë¶™ì—¬ì¤€ë‹¤.
* ê° ë©”ì„œë“œì— @Bean ì„ ë¶™ì—¬ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.

<br/>

## **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì ìš©**

**ì½”ë“œ**
```java
public class MemberApp {
    public static void main(String[] args) {

        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = ac.getBean("memberService", MemberService.class);

        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("origin : " + member.getName());
        System.out.println("find : " + findMember.getName());
    }
}
```

<br/>

**ë¡œê·¸**
```java
12:51:07.563 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@4a87761d
12:51:07.588 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
12:51:07.743 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
12:51:07.749 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
12:51:07.750 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
12:51:07.752 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
12:51:07.760 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'appConfig'
12:51:07.765 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'discountPolicy'
12:51:07.783 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'MemberRepository'
12:51:07.788 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'memberService'
12:51:07.788 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'orderService'
```

* ApplicationContext ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

* ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ AppConfig ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DIë¥¼ í–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•œë‹¤.

* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” @Configuration ì´ ë¶™ì€ AppConfig ë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤. ì—¬ê¸°ì„œ @Bean ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ í•œë‹¤.

* ìŠ¤í”„ë§ ë¹ˆì€ @Bean ì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

* ì´ì „ì—ëŠ” ê°œë°œìê°€ í•„ìš”í•œ ê°ì²´ë¥¼ AppConfig ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì¡°íšŒí–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤. ìŠ¤í”„ë§ ë¹ˆì€ applicationContext.getBean() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤.

* ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ ì§ì ‘ ìë°”ì½”ë“œë¡œ ëª¨ë“  ê²ƒì„ í–ˆë‹¤ë©´ ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.

* ë¡œê·¸ë¥¼ ë³´ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— AppConfig, @Bean ì´ ì íŒ ë©”ì„œë“œë“¤ì´ ì°¨ë¡€ëŒ€ë¡œ ë“±ë¡ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
* 
<br/>

# ì°¸ê³ 

* [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬](https://www.inflearn.com/)
